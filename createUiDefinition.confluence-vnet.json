{
  "$schema": "https://schema.management.azure.com/schemas/0.1.2-preview/CreateUiDefinition.MultiVm.json#",
  "version": "0.1.2",
  "handler": "Microsoft.Azure.CreateUIDef",
  "parameters": {
    "basics": [
      {
        "name": "functionAppName",
        "type": "Microsoft.Common.TextBox",
        "label": "Function App Name",
        "toolTip": "Enter a globally unique name for the Azure Function App."
      },
      {
        "name": "storageAccountName",
        "type": "Microsoft.Common.TextBox",
        "label": "Storage Account Name",
        "toolTip": "Name of the storage account to hold the diagrams and JSON topology."
      },
      {
        "name": "appServicePlanName",
        "type": "Microsoft.Common.TextBox",
        "label": "App Service Plan Name",
        "toolTip": "Name of the Elastic Premium plan for the function."
      },
      {
        "name": "containerName",
        "type": "Microsoft.Common.TextBox",
        "defaultValue": "drawfunc",
        "label": "Blob Container Name",
        "toolTip": "Name of the blob container where diagrams will be stored."
      },
      {
        "name": "location",
        "type": "Microsoft.Common.Location",
        "label": "Region",
        "toolTip": "Select the Azure region for deployment."
      },
      {
        "name": "subnetResourceId",
        "type": "Microsoft.Common.TextBox",
        "label": "Subnet Resource ID",
        "toolTip": "Resource ID of the subnet to use for vNet integration (for example, /subscriptions/.../virtualNetworks/.../subnets/...)."
      },
      {
        "name": "confluenceBaseUrl",
        "type": "Microsoft.Common.TextBox",
        "label": "Confluence Base URL",
        "toolTip": "Base URL of your Confluence instance reachable from this vNet."
      },
      {
        "name": "confluenceEmail",
        "type": "Microsoft.Common.TextBox",
        "label": "Confluence Account Username/Email",
        "toolTip": "Username or email for the Confluence account used for API access."
      },
      {
        "name": "confluenceApiToken",
        "type": "Microsoft.Common.PasswordBox",
        "label": "Confluence API Token / Password",
        "toolTip": "API token or password for the Confluence account. This will be stored securely as an app setting."
      },
      {
        "name": "confluencePageId",
        "type": "Microsoft.Common.TextBox",
        "label": "Confluence Page ID",
        "toolTip": "ID of the Confluence page where diagrams will be attached."
      },
      {
        "name": "confluenceAttachmentName",
        "type": "Microsoft.Common.TextBox",
        "label": "Confluence Attachment Name",
        "defaultValue": "cloudnetdraw-topology.drawio",
        "toolTip": "File name to use for the diagram attachment in Confluence."
      }
    ]
  },
  "outputs": {
    "functionAppName": "[basics('functionAppName')]",
    "storageAccountName": "[basics('storageAccountName')]",
    "appServicePlanName": "[basics('appServicePlanName')]",
    "containerName": "[basics('containerName')]",
    "location": "[basics('location')]",
    "subnetResourceId": "[basics('subnetResourceId')]",
    "confluenceBaseUrl": "[basics('confluenceBaseUrl')]",
    "confluenceEmail": "[basics('confluenceEmail')]",
    "confluenceApiToken": "[basics('confluenceApiToken')]",
    "confluencePageId": "[basics('confluencePageId')]",
    "confluenceAttachmentName": "[basics('confluenceAttachmentName')]",
    "planId": "confluence-vnet"
  }
}
